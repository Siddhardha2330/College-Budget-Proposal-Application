<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Form</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <style>
    body {
      font-family: 'Roboto', Helvetica, Arial, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
    }

    .header {
      background-color: #343a40;
      color: #fff;
      text-align: center;
      padding: 20px;
      border-radius: 5px;
      margin: 20px auto;
      width: 90%;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .header .image img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
    }

    .header .text {
      margin-left: 20px;
      text-align: left;
      color: #ef35ef;
    }

    .header .text .college-name {
      font-size: 34px;
    }

    .header .text .welcome {
      font-size: 16px;
      color: #fff;
    }

    .header .logout-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #dc3545;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      padding: 5px 10px;
    }

    .navigation {
      background-color: #6c757d;
      padding: 10px;
      border-radius: 5px;
      margin: 20px auto;
      width: 90%;
      text-align: center;
    }

    .navigation ul {
      list-style: none;
      padding: 0;
      display: flex;
      justify-content: space-around;
      margin: 0;
    }

    .navigation a {
      color: #fff;
      text-decoration: none;
      padding: 10px;
      transition: color 0.3s ease;
    }

    .navigation a:hover {
      color: #ffc107;
    }

    .container {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 5px;
      margin: 20px auto;
      width: 90%;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .budget-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .budget-table th,
    .budget-table td {
      padding: 10px;
      border: 1px solid #dee2e6;
    }

    .budget-table th {
      background-color: #343a40;
      color: #fff;
    }

    .budget-table td {
      background-color: #f8f9fa;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ced4da;
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <header class="header">
    <div class="image">
      <img src="/image.png" alt="Logo">
    </div>
    <div class="text">
      <div class="college-name">
        <b>Vishnu Institute of Technology</b>
      </div>
      <div class="welcome">
        <b>Welcome user10@gmail.com</b>
      </div>
    </div>
    <a href="/logout">
      <button class="logout-btn">Log out</button>
    </a>
  </header>

  <nav class="navigation">
    <ul>
      <li><a href="/dashboard">Home</a></li>
      <li><a href="/sql/budgetform">Budget form</a></li>
      <li><a href="/sql/budgetinfo">Report</a></li>
      <li><a href="/sql/budgettotal">Total</a></li>
    </ul>
  </nav>


  <div class="container">
    <% if (typeof message !== 'undefined' && message) { %>
      <div style="text-align: center; color: black;"><%= message %></div>
    <% } %>
    <form id="budgetForm" action="/sql/submit" method="post">
      <table class="budget-table">
        <thead>
          <tr>
            <td>Academic Year</td>
            <td><input type="text" name="academicyear" id="academicyear"
                title="Enter the academic year in the format YYYY-YY" required></td>
          </tr>
          <tr>
            <td>Branch</td>
            <td>
              <span><%= department %></span>
              <input type="hidden" name="department" id="department" value='<%= department %>'>
            </td>
          </tr>
          <tr>
            <th>Particulars</th>
            <th>Proposed Budget</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><h2>Income</h2></td>
            <td></td>
          </tr>
          <tr>
            <td><h3>Tuition Fee</h3></td>
            <td></td>
          </tr>
          <tr>
            <td>B.Tech</td>
            <td><input type="number" name="in1" id="income" required></td>
          </tr>
          <tr>
            <td>M.Tech</td>
            <td><input type="number" name="in2" id="income" required></td>
          </tr>
          <tr>
            <td><b>Research Grants</b></td>
            <td><input type="number" name="in3" id="income" required></td>
          </tr>
          <tr>
            <td><b>Hospital Revenue (clinic wise)</b></td>
            <td><input type="number" name="in4" id="income" required></td>
          </tr>
          <tr>
            <td><b>Hostel Fee and Mess Fee</b></td>
            <td><input type="number" name="in5" id="income" required></td>
            </tr>
            <tr>
              <td><b>Transportation Fee</b></td>
              <td><input type="number" name="in6" id="income" required></td>
            </tr>
            <tr>
              <td><b>Other Revenue (Radio Vishnu 90.4)</b></td>
              <td><input type="number" name="in7" id="income" required></td>
            </tr>
            <tr>
              <td></td>
              <td><b>Total</b><input type="number" id="totalin" name="totalin" required></td>
            </tr>

            <tr>
              <td>
                <h2>Expenditure - Recurring</h2>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <h3>Physical Expenditure</h3>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>Advertisement Expenses</td>
              <td><input type="number" name="pe1" id="physical" required></td>
            </tr>
            <tr>
              <td>Audit Fee</td>
              <td><input type="number" name="pe2" id="physical" required></td>
            </tr>
            <tr>
              <td>Bank Charges</td>
              <td><input type="number" name="pe3" id="physical" required></td>
            </tr>
            <tr>
              <td>Books and Periodicals, Journals</td>
              <td><input type="number" name="pe4" id="physical" required></td>
            </tr>
            <tr>
              <td>Electricity Charges</td>
              <td><input type="number" name="pe5" id="physical" required></td>
            </tr>
            <tr>
              <td>Financial Charges / Interest Charges</td>
              <td><input type="number" name="pe6" id="physical" required></td>
            </tr>
            <tr>
              <td>General Expenses</td>
              <td><input type="number" name="pe7" id="physical" required></td>
            </tr>
            <tr>
              <td>Guest House Maintenance</td>
              <td><input type="number" name="pe8" id="physical" required></td>
            </tr>
            <tr>
              <td>Horticulture Expenses</td>
              <td><input type="number" name="pe9" id="physical" required></td>
            </tr>
            <tr>
              <td>House Keeping Charges</td>
              <td><input type="number" name="pe10" id="physical" required></td>
            </tr>
            <tr>
              <td>Students Insurance and Building Insurance</td>
              <td><input type="number" name="pe11" id="physical" required></td>
            </tr>
            <tr>
              <td>Professional Charges</td>
              <td><input type="number" name="pe12" id="physical" required></td>
            </tr>
            <tr>
              <td>Rates and Taxes, Professional Tax, Property Tax</td>
              <td><input type="number" name="pe13" id="physical" required></td>
            </tr>
            <tr>
              <td>
                <h4>Repairs and Maintenance</h4>
              </td>
              <td></td>
            </tr>
            <ul>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Building Maintenance</p>
                </td>
                <td><input type="number" name="pe14" id="physical" required></td>
              </tr>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Vehicle Maintenance</p>
                </td>
                <td><input type="number" name="pe15" id="physical" required></td>
              </tr>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Electrical Maintenance</p>
                </td>
                <td><input type="number" name="pe16" id="physical" required></td>
              </tr>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Computer Maintenance</p>
                </td>
                <td><input type="number" name="pe17" id="physical" required></td>
              </tr>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Generator Maintenance</p>
                </td>
                <td><input type="number" name="pe18" id="physical" required></td>
              </tr>
              <tr>
                <td>
                  <p style="margin-left: 200px;">Furniture Maintenance</p>
                </td>
                <td><input type="number" name="pe19" id="physical" required></td>
              </tr>
            </ul>
            <tr>
              <td>Security Charges</td>
              <td><input type="number" name="pe20" id="physical" required></td>
            </tr>
            <tr>
              <td>Telephone Charges</td>
              <td><input type="number" name="pe21" id="physical" required></td>
            </tr>
            <tr>
              <td>Transporatation of Goods and Service</td>
              <td><input type="number" name="pe22" id="physical" required></td>
            </tr>
            <tr>
              <td>Water Treatment Plant Maintenance</td>
              <td><input type="number" name="pe23" id="physical" required></td>
            </tr>
            <tr>
              <td>Sewage Treatment Plant Expenses</td>
              <td><input type="number" name="pe24" id="physical" required></td>
            </tr>

            <tr>
              <td><b style="margin-left: 150px;">Total A</b></td>
              <td><input type="number" id="totalA" name="totalA" required></td>
            </tr>
            <tr>
              <td>
                <h2>Academic Expenditure</h2>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>Statutory Inspections and Accreditation Expenses</td>
              <td><input type="number" id="academic" name="ae1" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">NBA / NAAC/ Autonomous/ FFC</p>
              </td>
              <td><input type="number" id="academic" name="ae2" required></td>
            </tr>
            <tr>
              <td>Affiliation Fee</td>
              <td><input type="number" id="academic" name="ae3" required></td>
            </tr>
            <tr>
              <td>JNTU Common Service Fees</td>
              <td><input type="number" id="academic" name="ae4" required></td>
            </tr>
            <tr>
              <td>Students Gifts, Merit Prizes</td>
              <td><input type="number" id="academic" name="ae5" required></td>
            </tr>
            <tr>
              <td>Governing Body Expenses</td>
              <td><input type="number" id="academic" name="ae6" required></td>
            </tr>
            <tr>
              <td>Faculty Car Hire Charges</td>
              <td><input type="number" id="academic" name="ae7" required></td>
            </tr>
            <tr>
              <td>Faculty Development Programs</td>
              <td><input type="number" id="academic" name="ae8" required></td>
            </tr>
            <tr>
              <td>Examination Expenses, Board of Study Expenses</td>
              <td><input type="number" id="academic" name="ae9" required></td>
            </tr>
            <tr>
              <td>Staff Conveyance and Travelling Expenses</td>
              <td><input type="number" id="academic" name="ae10" required></td>
            </tr>
            <tr>
              <td>Hospital/ Stifund Expenses</td>
              <td><input type="number" id="academic" name="ae11" required></td>
            </tr>
            <tr>
              <td>Hospitality Charges</td>
              <td><input type="number" id="academic" name="ae12" required></td>
            </tr>
            <tr>
              <td>Inspection Charges (AICTE / JNTU/NTRUHS)</td>
              <td><input type="number" id="academic" name="ae13" required></td>
            </tr>
            <tr>
              <td>Internet / Website Expenses</td>
              <td><input type="number" id="academic" name="ae14" required></td>
            </tr>
            <tr>
              <td>
                <h4>Students Extra Co-Curricular Activities</h4>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">1st Induction Program</p>
              </td>
              <td><input type="number" id="academic" name="ae15" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Annual Day Expenses</p>
              </td>
              <td><input type="number" id="academic" name="ae16" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Specify and other Functions</p>
              </td>
              <td><input type="number" id="academic" name="ae17" required></td>
            </tr>
            <tr>
              <td>
                <h4>Lab Maintenance</h4>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Consumables</p>
              </td>
              <td><input type="number" id="academic" name="ae18" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Glasswares</p>
              </td>
              <td><input type="number" id="academic" name="ae19" required></td>
            </tr>
            <tr>
              <td>Membership, Certification Exps</td>
              <td><input type="number" id="academic" name="ae20" required></td>
            </tr>
            <tr>
              <td>PG New Courses/ New Colleges</td>
              <td><input type="number" id="academic" name="ae21" required></td>
            </tr>
            <tr>
              <td>Postage and Courier Charges</td>
              <td><input type="number" id="academic" name="ae22" required></td>
            </tr>
            <tr>
              <td>Printing and Stationery</td>
              <td><input type="number" id="academic" name="ae23" required></td>
            </tr>
            <tr>
              <td>
                <h4>Research and Development</h4>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">In House R & D</p>
              </td>
              <td><input type="number" id="academic" name="ae24" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Consultancy Incentives</p>
              </td>
              <td><input type="number" id="academic" name="ae25" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Seed Funding</p>
              </td>
              <td><input type="number" id="academic" name="ae26" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Incentives for Paper Publication</p>
              </td>
              <td><input type="number" id="academic" name="ae27" required></td>
            </tr>
            <tr>
              <td>
                <p style="margin-left: 150px;">Incentives on Patents</p>
              </td>
              <td><input type="number" id="academic" name="ae28" required></td>
            </tr>
            <tr>
              <td>Seminar and Workshops</td>
              <td><input type="number" id="academic" name="ae29" required></td>
            </tr>
            <tr>
              <td>Students Extra Curricular Activities (Student Development Programs)</td>
              <td><input type="number" id="academic" name="ae30" required></td>
            </tr>
            <tr>
              <td>Remunerations to Visiting Faculty</td>
              <td><input type="number" id="academic" name="ae31" required></td>
            </tr>
            <tr>
              <td>Placement, Training and Rectruitment Cell</td>
              <td><input type="number" id="academic" name="ae32" required></td>
            </tr>
            <tr>
              <td>FM / VTV Maintenance</td>
              <td><input type="number" id="academic" name="ae33" required></td>
            </tr>
            <tr>
              <td>Students Concession fee</td>
              <td><input type="number" id="academic" name="ae34" required></td>
            </tr>
            <tr>
              <td>Grants Expenditure</td>
              <td><input type="number" id="academic" name="ae35" required></td>
            </tr>
            <tr>
              <td>Board of Study Expenses</td>
              <td><input type="number" id="academic" name="ae36" required></td>
            </tr>

            <tr>
              <td><b style="margin-left: 150px;">Total B</b></td>
              <td><input type="number" id="totalB" name="totalB" required></td>
            </tr>
            <tr>
              <td>
                <h2>Personnel Expenses</h2>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>Salaries and Wages</td>
              <td><input type="number" id="personnel" name="per1" required></td>
            </tr>
            <tr>
              <td>Provident Fund (EPF+FPF)</td>
              <td><input type="number" id="personnel" name="per2" required></td>
            </tr>
            <tr>
              <td>Staff Welfare</td>
              <td><input type="number" id="personnel" name="per3" required></td>
            </tr>
            <tr>
              <td>Contribution to ESI</td>
              <td><input type="number" id="personnel" name="per4" required></td>
            </tr>
            <tr>
              <td>Mediclaim</td>
              <td><input type="number" id="personnel" name="per5" required></td>
            </tr>
            <tr>
              <td>Gratuity Provision / Premium</td>
              <td><input type="number" id="personnel" name="per6" required></td>
            </tr>

            <tr>
              <td><b style="margin-left: 150px;">Total C</b></td>
              <td><input type="number" id="totalC" name="totalC" required></td>
            </tr>
            <tr>
              <td><b style="margin-left: 150px;">Total D= (A+B+C)</b></td>
              <td><input type="number" id="totalD" name="totalD" required></td>
            </tr>
           
            <tr>
              <td>
                <h2>Non Recurring Expenditure</h2>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>Infrastructure Requirements</td>
              <td><input type="number" id="expenditure" name="nre1" required></td>

            </tr>
            <tr>
              <td>Lab Equipments</td>
              <td><input type="number" id="expenditure" name="nre2" required></td>

            </tr>
            <tr>
              <td>Computers and Peripherals</td>
              <td><input type="number" id="expenditure" name="nre3" required></td>

            </tr>
            <tr>
              <td>Softwares of all Departments</td>
              <td><input type="number" id="expenditure" name="nre4" required></td>

            </tr>
            <tr>
              <td>Furniture and Fixtures</td>
              <td><input type="number" id="expenditure" name="nre5" required></td>

            </tr>
            <tr>
              <td>Air Conditioner / Projectors / UPS</td>
              <td><input type="number" id="expenditure" name="nre6" required></td>

            </tr>
            <tr>
              <td>Electrical Equipment</td>
              <td><input type="number" id="expenditure" name="nre7" required></td>

            </tr>
            <tr>
              <td>Library Books and Journals</td>
              <td><input type="number" id="expenditure" name="nre8" required></td>

            </tr>
            <tr>
              <td>Sports Equipment</td>
              <td><input type="number" id="expenditure" name="nre9" required></td>

            </tr>
            <tr>
              <td>Motor Vehicles</td>
              <td><input type="number" id="expenditure" name="nre10" required></td>

            </tr>
            <tr>
              <td><b style="margin-left: 150px;">TotalE:</b></td>
              <td><input type="number" id="totalE" name="totalE" required></td>
            </tr>
            <tr>
              <td><b style="margin-left: 150px;">Total</b></td>
              <td><input type="number" id="total" name="total" required></td>
            </tr>
           


          </tbody>
        </table>
        <button type="submit" style="padding: 10px 20px; background-color: #81ed73; color: #fff; border: none; border-radius: 5px; cursor: pointer;">Submit</button>
       
      </form>


    </div>

  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.4/xlsx.full.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const inputFields = document.querySelectorAll('input[type="number"]');
      let downloadedData = [];
      // Initialize all input values with zeroes and add event listeners
      inputFields.forEach(inputField => {
        inputField.value = 0; // Set default value to 0
        inputField.addEventListener('focus', function () {
          // Clear default value when the input field is focused
          if (this.value === '0') {
            this.value = '';
          }
        });
        inputField.addEventListener('blur', function () {
          // Restore default value if no value is entered and another input is selected
          if (this.value === '') {
            this.value = '0';
          }
        });
      });
  // Function to calculate total based on the section (income, physical, academic, personnel)
  function calculateTotal(section) {
    let total = 0;
    document.querySelectorAll(`input[id^="${section}"]`).forEach(input => {
      total += parseFloat(input.value) || 0;
    });
    return total;
  }

  // Add input event listener to each input field
  document.querySelectorAll('input[type="number"]').forEach(inputField => {
    inputField.addEventListener('input', function () {
      // Calculate total income
      const totalIncome = calculateTotal('income');

      // Calculate total A for physical expenditure
      const totalA = calculateTotal('physical');

      // Calculate total B for academic expenditure
      const totalB = calculateTotal('academic');

      // Calculate total C for personnel expenses
      const totalC = calculateTotal('personnel');

      // Calculate total D = (A + B + C)
      const totalD = totalA + totalB + totalC;
      const totalE= calculateTotal('expenditure');
      // Calculate total for all fields
      const total = totalIncome + totalD +totalE;

      // Update the total fields
      document.getElementById('totalin').value = totalIncome;
      document.getElementById('totalA').value = totalA;
      document.getElementById('totalB').value = totalB;
      document.getElementById('totalC').value = totalC;
      document.getElementById('totalD').value = totalD;
      document.getElementById('totalE').value = totalE;
      document.getElementById('total').value = total;
    });
  });

 
  
 
});

  </script>
</body>

</html>